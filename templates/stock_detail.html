<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>股票详情 - A股选股策略系统</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/stock_detail.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- 引入ECharts图表库 -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-chart-line"></i> 股票详情</h1>
                <p class="subtitle" id="stock-info">加载中...</p>
            </div>
            <div class="header-info">
                <div class="info-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="current-date">加载中...</span>
                </div>
                <div class="info-item">
                    <a href="/" class="back-btn">
                        <i class="fas fa-arrow-left"></i> 返回列表
                    </a>
                </div>
            </div>
        </header>

        <!-- 股票基本信息 -->
        <div class="stock-basic-info">
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-icon"><i class="fas fa-barcode"></i></div>
                    <div class="info-content">
                        <div class="info-label">股票代码</div>
                        <div class="info-value" id="stock-code">-</div>
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-icon"><i class="fas fa-building"></i></div>
                    <div class="info-content">
                        <div class="info-label">股票名称</div>
                        <div class="info-value" id="stock-name">-</div>
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-icon"><i class="fas fa-industry"></i></div>
                    <div class="info-content">
                        <div class="info-label">所属板块</div>
                        <div class="info-value" id="stock-sector">-</div>
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-icon"><i class="fas fa-money-bill-wave"></i></div>
                    <div class="info-content">
                        <div class="info-label">最新价格</div>
                        <div class="info-value" id="stock-price">-</div>
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-icon"><i class="fas fa-chart-bar"></i></div>
                    <div class="info-content">
                        <div class="info-label">趋势强度</div>
                        <div class="info-value" id="stock-trend">-</div>
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-icon"><i class="fas fa-percentage"></i></div>
                    <div class="info-content">
                        <div class="info-label">回撤幅度</div>
                        <div class="info-value" id="stock-pullback">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- K线图表区域 -->
        <div class="chart-section">
            <div class="section-header">
                <h2><i class="fas fa-chart-candlestick"></i> K线图表</h2>
                <div class="chart-controls">
                    <select id="period-select" class="period-select">
                        <option value="daily">日线</option>
                        <option value="weekly">周线</option>
                        <option value="monthly">月线</option>
                    </select>
                    <select id="ma-select" class="ma-select">
                        <option value="ma5">MA5</option>
                        <option value="ma10">MA10</option>
                        <option value="ma20">MA20</option>
                        <option value="ma60">MA60</option>
                        <option value="all">全部均线</option>
                    </select>
                    <button id="refresh-chart" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> 刷新图表
                    </button>
                </div>
            </div>
            <div class="chart-container">
                <div id="kline-chart" style="width: 100%; height: 500px;"></div>
            </div>
        </div>

        <!-- 技术指标 -->
        <div class="technical-indicators">
            <div class="section-header">
                <h2><i class="fas fa-chart-area"></i> 技术指标</h2>
            </div>
            <div class="indicators-grid">
                <div class="indicator-card">
                    <h3><i class="fas fa-ruler-combined"></i> 移动平均线</h3>
                    <div class="indicator-values">
                        <div class="indicator-item">
                            <span class="indicator-label">MA5</span>
                            <span class="indicator-value" id="ma5-value">-</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">MA20</span>
                            <span class="indicator-value" id="ma20-value">-</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">MA60</span>
                            <span class="indicator-value" id="ma60-value">-</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">MA20>MA60</span>
                            <span class="indicator-value" id="ma-compare">-</span>
                        </div>
                    </div>
                </div>
                <div class="indicator-card">
                    <h3><i class="fas fa-mountain"></i> 价格高点</h3>
                    <div class="indicator-values">
                        <div class="indicator-item">
                            <span class="indicator-label">60日最高</span>
                            <span class="indicator-value" id="high-60d">-</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">当前回撤</span>
                            <span class="indicator-value" id="current-pullback">-</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">是否创新高</span>
                            <span class="indicator-value" id="new-high">-</span>
                        </div>
                    </div>
                </div>
                <div class="indicator-card">
                    <h3><i class="fas fa-balance-scale"></i> 成交量</h3>
                    <div class="indicator-values">
                        <div class="indicator-item">
                            <span class="indicator-label">今日成交量</span>
                            <span class="indicator-value" id="volume-today">-</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">5日均量</span>
                            <span class="indicator-value" id="volume-ma5">-</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">量比</span>
                            <span class="indicator-value" id="volume-ratio">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 选股理由 -->
        <div class="selection-reason">
            <div class="section-header">
                <h2><i class="fas fa-lightbulb"></i> 选股理由</h2>
            </div>
            <div class="reason-content">
                <div class="reason-item">
                    <h3>策略匹配情况</h3>
                    <ul id="strategy-points">
                        <li>加载中...</li>
                    </ul>
                </div>
                <div class="reason-item">
                    <h3>详细分析</h3>
                    <div class="analysis-text" id="detailed-analysis">
                        加载中...
                    </div>
                </div>
            </div>
        </div>

        <!-- 交易建议 -->
        <div class="trading-advice">
            <div class="section-header">
                <h2><i class="fas fa-hand-holding-usd"></i> 交易建议</h2>
            </div>
            <div class="advice-content">
                <div class="advice-item">
                    <h3>买入建议</h3>
                    <ul>
                        <li>建议买入价格：<span id="buy-price">-</span></li>
                        <li>建议仓位：不超过总资金的20%</li>
                        <li>买入时机：今日收盘前或明日开盘</li>
                    </ul>
                </div>
                <div class="advice-item">
                    <h3>止损建议</h3>
                    <ul>
                        <li>止损价格：<span id="stop-loss-price">-</span></li>
                        <li>止损条件：从最高点回撤4%</li>
                        <li>止损执行：立即清仓</li>
                    </ul>
                </div>
                <div class="advice-item">
                    <h3>持有建议</h3>
                    <ul>
                        <li>持有周期：建议持有1-2周</li>
                        <li>调仓建议：每周一重新评估</li>
                        <li>监控要点：每日监控回撤情况</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 页脚 -->
        <footer class="footer">
            <p><i class="fas fa-exclamation-triangle"></i> 风险提示：股市有风险，投资需谨慎。本策略仅供参考，不构成投资建议。</p>
            <p class="copyright">© 2023 A股选股策略系统 | 数据来源：akshare | 数据更新时间：<span id="data-update-time">-</span></p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/stock_detail.js') }}"></script>
</body>
</html>